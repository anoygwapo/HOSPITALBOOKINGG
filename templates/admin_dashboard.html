<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin Dashboard — HospitalCare</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #f4fbff;
      --panel: #ffffff;
      --muted: #6b7280;
      --primary: #0466c8;
      --accent: #00b4d8;
      --success: #2bb673;
      --danger: #e04848;
      --warn: #f6b24a;
      --radius: 12px;
      --shadow-lg: 0 18px 50px rgba(6,78,163,0.08);
      --shadow-sm: 0 8px 20px rgba(9,30,66,0.06);
      --max-w:1300px;
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,var(--bg),#fbfeff);color:#062c52;-webkit-font-smoothing:antialiased}

    .wrap{max-width:var(--max-w);margin:28px auto;padding:18px;display:grid;grid-template-columns:260px 1fr;gap:20px;align-items:start}
    @media (max-width:980px){ .wrap{grid-template-columns:1fr;padding:12px} }

    /* Sidebar */
    .sidebar{
      background:linear-gradient(180deg,var(--primary),var(--accent));
      color:#fff;border-radius:var(--radius);padding:20px;display:flex;flex-direction:column;justify-content:space-between;box-shadow:var(--shadow-lg)
    }
    .brand{display:flex;gap:12px;align-items:center}
    .brand .logo{width:48px;height:48px;border-radius:10px;background:rgba(255,255,255,0.12);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:18px}
    .brand h2{margin:0;font-size:1.15rem}
    .sidebar .meta{margin-top:12px;color:rgba(255,255,255,0.92);font-size:0.94rem}
    .nav{display:flex;flex-direction:column;gap:8px;margin-top:20px}
    .nav a{color:rgba(255,255,255,0.95);text-decoration:none;padding:10px;border-radius:10px;font-weight:600}
    .nav a:hover{background:rgba(255,255,255,0.06)}

    .logout{display:inline-block;margin-top:18px;padding:10px;border-radius:999px;background:linear-gradient(90deg,#ff6b6b,#ff8a4a);color:#fff;text-align:center;text-decoration:none;font-weight:700}
    .logout:hover{opacity:.95;transform:translateY(-1px)}

    /* Main area */
    .main{display:flex;flex-direction:column;gap:18px}
    .topbar{display:flex;gap:12px;align-items:center;justify-content:space-between}
    .topbar .search{flex:1;max-width:520px;display:flex;align-items:center;gap:8px}
    .search input{flex:1;padding:10px 12px;border-radius:10px;border:1px solid #e6eef8;background:#fff;box-shadow:var(--shadow-sm)}
    .actions{display:flex;gap:8px;align-items:center}

    .stat-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    @media (max-width:700px){ .stat-grid{grid-template-columns:repeat(2,1fr)} }

    .stat{padding:14px;border-radius:12px;background:linear-gradient(180deg,#fff,#fbfdff);box-shadow:var(--shadow-sm);border:1px solid rgba(6,78,163,0.04)}
    .stat .label{color:var(--muted);font-size:0.9rem}
    .stat .value{font-weight:800;color:var(--primary);font-size:1.35rem;margin-top:6px}

    /* Section card */
    .card{background:var(--panel);border-radius:12px;padding:14px;border:1px solid rgba(6,78,163,0.04);box-shadow:var(--shadow-sm)}
    .card h3{margin:0 0 8px 0;color:var(--primary);font-size:1.05rem}

    /* Table styles */
    .table-wrap{overflow:auto;border-radius:10px}
    table{width:100%;border-collapse:collapse;min-width:920px}
    thead th{background:linear-gradient(90deg,var(--accent),var(--primary));color:#fff;padding:12px 14px;text-align:left;font-weight:700;position:sticky;top:0}
    tbody td{padding:12px 14px;border-bottom:1px solid #f1f5f9;background:linear-gradient(180deg,#fff,#fbfdff);color:#062c52}
    tbody tr:hover td{background:#f1f8ff}
    .status{display:inline-block;padding:6px 10px;border-radius:999px;font-weight:700;font-size:0.85rem}
    .status.Pending{background:rgba(246,178,74,0.10);color:var(--warn)}
    .status.Approved{background:rgba(43,182,115,0.10);color:var(--success)}
    .status.Declined{background:rgba(224,72,72,0.08);color:var(--danger)}

    /* buttons */
    .btn{padding:8px 12px;border-radius:10px;border:0;font-weight:700;cursor:pointer;text-decoration:none;display:inline-block}
    .btn.primary{background:linear-gradient(90deg,var(--primary),var(--accent));color:#fff;box-shadow:0 8px 26px rgba(4,99,177,0.12)}
    .btn.ghost{background:transparent;border:1px solid rgba(6,78,163,0.06);color:var(--primary)}
    .btn.success{background:linear-gradient(90deg,#43e97b,#38f9d7);color:#083a21}
    .btn.danger{background:linear-gradient(90deg,#ff6b6b,#ff8a4a);color:#fff}
    .compact{font-size:0.92rem;padding:6px 10px}

    .muted{color:var(--muted)}
    .flex{display:flex;align-items:center;gap:8px}
    .right{margin-left:auto}
  </style>
</head>
<body>
  <div class="wrap">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div>
        <div class="brand">
          <div class="logo">HC</div>
          <div>
            <h2>Admin</h2>
            <div class="meta">HospitalCare — Management</div>
          </div>
        </div>

        <nav class="nav">
          <a href="#">Overview</a>
          <a href="#bookings">Bookings</a>
          <a href="#doctors">Doctors</a>
        </nav>
      </div>

      <div>
        <div class="muted" style="font-size:0.9rem">Signed in as <strong>Administrator</strong></div>
        <a class="logout" href="{{ url_for('admin_logout') }}">Logout</a>
      </div>
    </aside>

    <!-- Main -->
    <main class="main">
      <div class="topbar">
        <div class="search">
          <input id="searchInput" type="search" placeholder="Search by patient, doctor, reason or date…">
        </div>

        <div class="actions">
          <a href="{{ url_for('register_doctor') }}" class="btn primary">+ Add Doctor</a>
          <a class="btn ghost" href="{{ url_for('admin_dashboard') }}">Refresh</a>
        </div>
      </div>

      <!-- Statistics -->
      <div class="stat-grid">
        <div class="stat card">
          <div class="label">Total Bookings</div>
          <div class="value">{{ appointments|length }}</div>
        </div>
        <div class="stat card">
          <div class="label">Pending</div>
          <div class="value">{{ appointments | selectattr('status','equalto','Pending') | list | length }}</div>
        </div>
        <div class="stat card">
          <div class="label">Approved</div>
          <div class="value">{{ appointments | selectattr('status','equalto','Approved') | list | length }}</div>
        </div>
      </div>

      <!-- Appointments -->
      <section id="bookings" class="card">
        <h3>All Booked Appointments</h3>
        {% if appointments %}
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>ID</th><th>Patient</th><th>Doctor</th><th>Date</th><th>Time</th><th>Reason</th><th>Status</th><th>Action</th>
              </tr>
            </thead>
            <tbody id="appointmentsTbody">
              {% for a in appointments %}
              <tr>
                <td>{{ a.id }}</td>
                <td>{{ a.name }}</td>
                <td>{{ a.doctor.name }} <span class="muted">({{ a.doctor.specialization }})</span></td>
                <td>{{ a.date }}</td>
                <td>{{ a.time }}</td>
                <td>{{ a.reason }}</td>
                <td><span class="status {{ a.status }}">{{ a.status }}</span></td>
                <td>
                  {% if a.status == 'Pending' %}
                  <form method="post" action="{{ url_for('approve_booking', id=a.id) }}" style="display:inline">
                    <button type="submit" class="btn success compact">Approve</button>
                  </form>
                  <form method="post" action="{{ url_for('decline_booking', id=a.id) }}" style="display:inline">
                    <button type="submit" class="btn danger compact">Decline</button>
                  </form>
                  {% else %}
                  <span class="muted compact">{{ a.status }}</span>
                  {% endif %}
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        {% else %}
        <div class="muted" style="padding:18px">No bookings yet.</div>
        {% endif %}
      </section>

      <!-- Doctors -->
     <!-- Doctors -->
<section id="doctors" class="card">
  <div style="display:flex;align-items:center;gap:12px;justify-content:space-between">
    <h3>Available Doctors</h3>
    <div class="muted">Click a row to view recent bookings</div>
  </div>

  <div class="table-wrap" style="margin-top:12px">
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Photo</th>
          <th>Name</th>
          <th>Specialization</th>
          <th>Schedule</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        {% for d in doctors %}
        <tr>
          <td>{{ d.id }}</td>
          <td>
            {% if d.photo %}
              <img src="{{ url_for('static', filename=d.photo) }}" alt="{{ d.name }}" width="50" height="50" style="border-radius:50%;object-fit:cover;">
            {% else %}
              <span class="muted">No photo</span>
            {% endif %}
          </td>
          <td>{{ d.name }}</td>
          <td>{{ d.specialization }}</td>
          <td>{{ d.schedule }}</td>
          <td class="flex">
            <a href="{{ url_for('edit_doctor', id=d.id) }}" class="btn primary compact">Edit</a>
            <form method="post" action="{{ url_for('delete_doctor', id=d.id) }}" style="display:inline" onsubmit="return confirm('Are you sure you want to delete this doctor?');">
              <button type="submit" class="btn danger compact">Delete</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>

    </main>
  </div>
</body>
</html>
